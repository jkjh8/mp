(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0374":function(t,e,l){"use strict";var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("q-table",{attrs:{data:t.filelist,columns:t.columns,"row-key":"index",selection:"multiple",selected:t.selected,filter:t.filter},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top-right",fn:function(){return[l("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[l("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-action",fn:function(e){return[l("q-td",{attrs:{props:e}},[l("q-btn",{attrs:{dense:"",round:"",flat:"",color:"primary",icon:"mdi-play"},on:{click:function(l){return t.preview(e.row.name)}}})],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})},i=[],s=l("ded3"),n=l.n(s),o=l("2f62"),r=l("bb3d"),c=l.n(r),d={props:["selFilelist"],computed:n()({},Object(o["c"])("filelist",["filelist"])),mounted(){this.$store.dispatch("filelist/updateFilelist")},watch:{selected(t){this.$emit("selFile",t)},selFilelist(t){this.selected=t}},data(){return{columns:[{name:"index",label:"#",field:"index"},{name:"name",label:"NAME",align:"left",field:"name"},{name:"size",label:"SIZE",align:"center",field:"size",format:t=>""+c.a.formatBytes(t)},{name:"duration",label:"DURATION",align:"center",field:"duration",format:t=>""+c.a.formatTimes(1e3*t)},{name:"action",label:"ACTION",align:"center",field:""}],selected:this.selFilelist,filter:""}},methods:{preview(t){this.$emit("preview",t)}}},p=d,u=l("2877"),y=l("eaac"),m=l("27f9"),f=l("0016"),h=l("db86"),b=l("9c40"),q=l("eebe"),g=l.n(q),v=Object(u["a"])(p,a,i,!1,null,null,null);e["a"]=v.exports;g()(v,"components",{QTable:y["a"],QInput:m["a"],QIcon:f["a"],QTd:h["a"],QBtn:b["a"]})},"098e":function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"q-ma-xl"},[l("q-card",[l("q-card-section",[l("PlaylistHeader",{on:{addlist:function(e){t.addFileDialog=!t.addFileDialog}}})],1),l("q-separator"),l("q-card-section",[l("PlaylistTable")],1)],1),l("q-dialog",{model:{value:t.addFileDialog,callback:function(e){t.addFileDialog=e},expression:"addFileDialog"}},[l("q-card",{staticStyle:{"max-width":"1500px",width:"800px"}},[l("q-card-section",{staticClass:"q-pa-none"},[l("FilelistTable",{attrs:{selFilelist:t.selFilelist},on:{selFile:t.selFile}})],1),l("q-separator"),l("q-card-actions",{attrs:{align:"right"}},[l("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),l("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Confirm",color:"primary"},on:{click:t.updatePlaylist}})],1)],1)],1)],1)},i=[],s=(l("e6cf"),l("ded3")),n=l.n(s),o=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("q-item",[l("q-item-section",{attrs:{avatar:""}},[l("q-avatar",{attrs:{color:"secondary"}},[l("q-icon",{attrs:{name:"mdi-play",size:"32px"}})],1)],1),l("q-item-section",[l("q-item-label",[t._v("PLAYLIST")])],1),l("q-item-section",{attrs:{side:""}},[l("q-select",{staticStyle:{width:"200px"},attrs:{options:t.list,label:"Select Playlist",dense:""},on:{input:function(e){return t.call_playlist()}},model:{value:t.playlistSel,callback:function(e){t.playlistSel=e},expression:"playlistSel"}})],1),l("q-item-section",{attrs:{side:""}},[l("q-btn",{attrs:{icon:"mdi-play",round:"",flat:""}},[l("q-tooltip",[t._v("Playlist play")])],1)],1),l("q-item-section",{attrs:{side:""}},[l("q-btn",{attrs:{icon:"mdi-stop",round:"",flat:""}},[l("q-tooltip",[t._v("Playlist play")])],1)],1),l("q-item-section",{attrs:{side:""}},[l("q-btn",{attrs:{icon:"mdi-plus-circle-outline",round:"",flat:""},on:{click:t.addlist}},[l("q-tooltip",[t._v("add file info playlist")])],1)],1)],1)],1)},r=[],c=l("2f62"),d={computed:n()(n()({},Object(c["c"])("playlist",["playlistName"])),Object(c["b"])("playlist",["playlistId"])),mounted(){this.playlistSel=this.playlistName},data(){return{list:["Playlist 1","Playlist 2","Playlist 3","Playlist 4","Playlist 5","Playlist 6","Playlist 7","Playlist 8"],playlistSel:""}},methods:{select_palylist(){this.playlistSel=this.playlistName},async call_playlist(){await this.$store.dispatch("playlist/setPlaylistName",this.playlistSel),this.$store.dispatch("playlist/reqPlaylist")},addlist(){this.$emit("addlist")}}},p=d,u=l("2877"),y=l("66e5"),m=l("4074"),f=l("cb32"),h=l("0016"),b=l("0170"),q=l("ddd8"),g=l("9c40"),v=l("05c0"),x=l("eebe"),w=l.n(x),P=Object(u["a"])(p,o,r,!1,null,null,null),$=P.exports;w()(P,"components",{QItem:y["a"],QItemSection:m["a"],QAvatar:f["a"],QIcon:h["a"],QItemLabel:b["a"],QSelect:q["a"],QBtn:g["a"],QTooltip:v["a"]});var I=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("q-table",{attrs:{data:t.curPlaylist,columns:t.columns,"row-key":"index"},scopedSlots:t._u([{key:"body",fn:function(e){return[l("q-tr",{key:e.row.index,attrs:{props:e}},t._l(e.cols,(function(a){return l("q-td",{key:a.name,attrs:{props:e}},["action"===a.name?l("div",[l("q-btn",{attrs:{flat:"",round:"",color:"primary",size:"0.8em",icon:"mdi-play"},on:{click:function(l){return t.playid(e.pageIndex)}}}),l("q-btn",{attrs:{flat:"",round:"",color:"red",size:"0.8em",icon:"mdi-stop"},on:{click:function(l){return t.stop(e.pageIndex)}}}),l("q-btn",{attrs:{flat:"",round:"",color:"black",size:"0.8em",icon:"mdi-delete"},on:{click:function(l){return t.del(e.pageIndex)}}}),l("q-btn",{attrs:{flat:"",round:"",color:"black",size:"0.8em",icon:"mdi-chevron-up"},on:{click:function(l){return t.changeList(e.pageIndex,e.pageIndex-1)}}}),l("q-btn",{attrs:{flat:"",round:"",color:"black",size:"0.8em",icon:"mdi-chevron-down"},on:{click:function(l){return t.changeList(e.pageIndex,e.pageIndex+1)}}})],1):l("div",[t._v("\n          "+t._s(a.value)+"\n        ")])])})),1)]}}])})},k=[],Q=(l("a434"),l("bb3d")),T=l.n(Q),F={computed:n()(n()({},Object(c["c"])("playlist",["curPlaylist"])),Object(c["b"])("playlist",["playlistId"])),mounted(){this.$store.dispatch("playlist/reqPlaylist")},data(){return{columns:[{name:"id",label:"ID",align:"center",field:"playid",format:t=>""+(t+1)},{name:"name",label:"NAME",align:"left",field:"name"},{name:"duration",label:"DURATION",align:"center",field:"duration",format:t=>""+T.a.formatTimes(1e3*t)},{name:"action",label:"ACTION",align:"center"}]}},methods:{playid(t){this.$axios.get(`/player/pi?id=${this.playlistId-1}&playid=${t}`)},stop(){this.$axios.get("/player/stop")},async changeList(t,e){var l=[];this.curPlaylist.forEach((t=>{l.push(t)}));const a=0,i=l.length-1;i<e&&(e=a),e<a&&(e=i),await l.splice(e,0,l.splice(t,1)[0]),await this.$axios.post("/playlist",{id:this.playlistId-1,list:l}),await this.$store.dispatch("playlist/reqPlaylist"),await this.$store.dispatch("playlist/rebuildPlaylist")},async del(t){await this.$axios.post("/playlist/remove",{id:this.playlistId-1,playid:t}),await this.$store.dispatch("playlist/reqPlaylist"),await this.$store.dispatch("playlist/rebuildPlaylist")}}},S=F,_=l("eaac"),B=l("bd08"),D=l("db86"),O=Object(u["a"])(S,I,k,!1,null,null,null),C=O.exports;w()(O,"components",{QTable:_["a"],QTr:B["a"],QTd:D["a"],QBtn:g["a"]});var N=l("0374"),j={components:{PlaylistHeader:$,PlaylistTable:C,FilelistTable:N["a"]},computed:n()({},Object(c["b"])("playlist",["playlistId"])),async mounted(){if(await this.$store.dispatch("user/getUser"),null===this.$store.state.user.authUser)return this.$router.push("/login");await this.$store.dispatch("playlist/reqPlaylist")},data(){return{addFileDialog:!1,listData:[],selFilelist:[]}},methods:{selFile(t){this.listData=t},async updatePlaylist(){await this.$store.dispatch("playlist/addPlaylist",this.listData),await this.$store.dispatch("playlist/reqPlaylist")}}},A=j,E=l("f09f"),z=l("a370"),M=l("eb85"),U=l("24e8"),L=l("4b7e"),H=l("7f67"),J=Object(u["a"])(A,a,i,!1,null,null,null);e["default"]=J.exports;w()(J,"components",{QCard:E["a"],QCardSection:z["a"],QSeparator:M["a"],QDialog:U["a"],QCardActions:L["a"],QBtn:g["a"]}),w()(J,"directives",{ClosePopup:H["a"]})},bb3d:function(t,e){function l(t,e=2){if(0===t)return"0 Bytes";const l=1024,a=e<0?0:e,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(t)/Math.log(l));return parseFloat((t/Math.pow(l,s)).toFixed(a))+" "+i[s]}function a(t){const e=new Date(t);let l=e.getUTCHours(),a=e.getUTCMinutes(),i=e.getUTCSeconds();return l=l<10?"0"+l:l,a=a<10?"0"+a:a,i=i<10?"0"+i:i,`${l}:${a}:${i}`}t.exports.formatBytes=l,t.exports.formatTimes=a}}]);